<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>RamOn Systems â€” IT Fixes & Howâ€‘Tos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Practical IT articles: fixes, troubleshooting, and howâ€‘tos." />

  <base href="/Site/">

  <link rel="preload" href="assets/styles.css?v=1.0.0" as="style">
  <link rel="stylesheet" href="assets/styles.css?v=1.0.0">

  <link rel="icon" type="image/png" href="assets/favicon.png">
  <link rel="apple-touch-icon" href="assets/favicon.png">

  <meta name="theme-color" content="#0b1020">
  <meta name="msapplication-TileColor" content="#2563eb">

  <style>
    /* --- MOBILE MENU TOGGLE --- */
    .menu-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 1.8rem;
      cursor: pointer;
      color: inherit;
    }

    @media (max-width: 768px) {
      .menu-toggle {
        display: block;
      }

      .top-nav {
        display: none;
        flex-direction: column;
        gap: 1rem;
        padding: 1rem 0;
      }

      .top-nav.open {
        display: flex;
      }
    }

    /* Dropdown styles */
    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-toggle {
      cursor: pointer;
      color: var(--fg);
      text-decoration: none;
      padding: 0.25rem 0.5rem;
      font-weight: 500;
      user-select: none;
    }

    .dropdown-menu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      min-width: 180px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      z-index: 20;
      padding: 0.25rem 0;
    }

    .dropdown-menu.show {
      display: block;
      animation: fadeInDown 200ms ease forwards;
    }

    .dropdown-menu a {
      display: block;
      padding: 0.5rem 1rem;
      color: var(--fg);
      text-decoration: none;
      font-size: 0.9rem;
      transition: background-color 0.2s ease;
    }

    .dropdown-menu a:hover {
      background-color: var(--accent-weak);
      color: var(--accent);
    }

    /* Featured post styles */
    .featured {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1.25rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: box-shadow 0.3s ease;
    }
    .featured:hover {
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    .featured h2 {
      margin-top: 0;
      font-size: 1.5rem;
      color: var(--accent);
    }
    .featured p {
      color: var(--muted);
      margin-bottom: 1rem;
    }
    .featured a.btn {
      padding: 0.5rem 1rem;
      font-weight: 600;
    }

    /* Animation for dropdown */
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <div id="seasonal-layer" class="seasonal" aria-hidden="true"></div>
  <a id="seasonal-toggle" class="seasonal" href="#" role="button" aria-pressed="true" title="Toggle seasonal effects">âœ¨ Effects: On</a>

  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-grid">

      <!-- BRAND -->
      <a class="brand" href="./">RamOn <span class="brand-accent">Systems</span></a>

      <!-- MOBILE MENU BUTTON -->
      <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-label="Open menu">â˜°</button>

      <!-- NAVIGATION -->
      <nav id="mainNav" class="top-nav" aria-label="Primary">
        <a href="./">Home</a>
        <div class="dropdown">
          <a href="#" 
   class="dropdown-toggle" 
   id="libraryToggle" 
   aria-expanded="false">
   Library
</a>

          <div class="dropdown-menu" id="libraryMenu">
            <a href="#">Networking Basics</a>
            <a href="#">Windows Fixes</a>
            <a href="#">Printer Troubleshooting</a>
            <a href="#">Security Tips</a>
            <a href="#">Hardware Repairs</a>
          </div>
        </div>
        <a href="post.html?slug=about">About</a>
        <button id="themeToggle" class="btn ghost" aria-label="Toggle dark mode">â˜¾</button>
      </nav>
    </div>
  </header>

  <!-- MAIN -->
  <main id="main" class="container">
    <section class="hero">
      <h1>IT Issues, Solved.</h1>
      <p class="sub">Straightforward guides, fixes, and notes from the trenches.</p>

      <form class="controls" role="search" aria-label="Search posts" onsubmit="return false;">
        <label class="visually-hidden" for="searchInput">Search posts</label>
        <input id="searchInput" type="search" placeholder="Search posts (e.g., 'printer', 'DNS', 'Windows 11')" />
        <div id="tags" class="tags" aria-label="Filter by tag"></div>
      </form>
    </section>

    <!-- Featured Post Section -->
    <section id="featuredPost" class="featured hidden" aria-label="Featured post">
      <!-- Featured post will be injected here -->
    </section>

    <section id="postsList" class="posts-list" aria-live="polite" aria-busy="false"></section>
    <div id="emptyState" class="empty hidden">No posts match your search.</div>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container">
      <p>Â© <span id="year"></span> RamOn Systems. Built with HTML, CSS, and vanilla JS.</p>
    </div>
  </footer>

  <!-- SCRIPT -->
  <script>
    const VERSION = 'v1.0.0';

    /* --- THEME TOGGLE --- */
    const themeToggle = document.getElementById('themeToggle');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme');

    if (savedTheme) document.documentElement.dataset.theme = savedTheme;
    else if (prefersDark) document.documentElement.dataset.theme = 'dark';

    themeToggle.addEventListener('click', () => {
      const next = document.documentElement.dataset.theme === 'dark' ? 'light' : 'dark';
      document.documentElement.dataset.theme = next;
      localStorage.setItem('theme', next);

      themeToggle.classList.remove('is-toggling');
      void themeToggle.offsetWidth;
      themeToggle.classList.add('is-toggling');
    });

    document.getElementById('year').textContent = new Date().getFullYear();

    /* --- POSTS LOADING --- */
    const postsUrl = `assets/posts.json?${VERSION}`;
    const postsListEl = document.getElementById('postsList');
    const emptyStateEl = document.getElementById('emptyState');
    const tagsEl = document.getElementById('tags');
    const searchInput = document.getElementById('searchInput');
    const featuredPostEl = document.getElementById('featuredPost');

    let ALL_POSTS = [];
    let activeTag = null;
    let query = '';

    function postCard(p) {
      return `
        <article class="card">
          <div class="card-body">
            <div class="card-meta">
              <time datetime="${p.date}">${new Date(p.date).toLocaleDateString()}</time>
              ${p.tags.map(t => `<a href="#" class="tag" data-tag="${t}">${t}</a>`).join('')}
            </div>
            <h2 class="card-title"><a href="post.html?slug=${encodeURIComponent(p.slug)}">${p.title}</a></h2>
            <p class="card-excerpt">${p.excerpt}</p>
            <div class="card-actions">
              <a class="btn" href="post.html?slug=${encodeURIComponent(p.slug)}">Read</a>
            </div>
          </div>
        </article>
      `;
    }

    function renderTags(posts) {
      const set = new Set();
      posts.forEach(p => p.tags.forEach(t => set.add(t)));
      const sorted = Array.from(set).sort((a, b) => a.localeCompare(b));

      tagsEl.innerHTML =
        `<a href="#" class="tag ${!activeTag ? 'active' : ''}" data-tag="">All</a>` +
        sorted.map(t => `<a href="#" class="tag ${activeTag === t ? 'active' : ''}" data-tag="${t}">${t}</a>`).join('');
    }

    function filterPosts() {
      postsListEl.setAttribute('aria-busy', 'true');

      let list = [...ALL_POSTS];
      if (activeTag) list = list.filter(p => p.tags.includes(activeTag));
      if (query.trim()) {
        const q = query.toLowerCase();
        list = list.filter(p =>
          p.title.toLowerCase().includes(q) ||
          p.excerpt.toLowerCase().includes(q) ||
          (p.keywords || '').toLowerCase().includes(q)
        );
      }

      postsListEl.innerHTML = list.map(postCard).join('');
      postsListEl.classList.add('is-ready');
      emptyStateEl.classList.toggle('hidden', list.length > 0);
      postsListEl.setAttribute('aria-busy', 'false');
    }

    // Renders the featured post (first post in ALL_POSTS)
    function renderFeaturedPost(posts) {
      if (!posts.length) {
        featuredPostEl.classList.add('hidden');
        return;
      }
      const featured = posts[0]; // you can customize this to pick any post you want
      featuredPostEl.innerHTML = `
        <h2>ðŸ”¥ Featured Post</h2>
        <h3><a href="post.html?slug=${encodeURIComponent(featured.slug)}">${featured.title}</a></h3>
        <p>${featured.excerpt}</p>
        <a href="post.html?slug=${encodeURIComponent(featured.slug)}" class="btn">Read More</a>
      `;
      featuredPostEl.classList.remove('hidden');
    }

    tagsEl.addEventListener('click', (e) => {
      const tag = e.target.closest('[data-tag]');
      if (!tag) return;
      activeTag = tag.dataset.tag || null;
      renderTags(ALL_POSTS);
      filterPosts();
      e.preventDefault();
    });

    searchInput.addEventListener('input', (e) => {
      query = e.target.value;
      filterPosts();
    });

    async function init() {
      try {
        const res = await fetch(postsUrl, { cache: 'no-cache' });
        ALL_POSTS = await res.json();
        ALL_POSTS.sort((a, b) => new Date(b.date) - new Date(a.date));
        renderTags(ALL_POSTS);
        renderFeaturedPost(ALL_POSTS);
        filterPosts();
      } catch (err) {
        postsListEl.innerHTML = `<p class="error">Could not load posts. Check <code>assets/posts.json</code>.</p>`;
        console.error(err);
      }
    }
    init();

    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[href]');
      if (!a) return;
      const url = new URL(a.href, location.href);
      if (url.origin === location.origin) {
        document.body.classList.add('is-exiting');
      }
    });

    /* --- MOBILE MENU TOGGLE JS --- */
    const menuToggle = document.getElementById('menuToggle');
    const mainNav = document.getElementById('mainNav');

    menuToggle.addEventListener('click', () => {
      const isOpen = mainNav.classList.toggle('open');
      menuToggle.setAttribute('aria-expanded', isOpen);
      menuToggle.textContent = isOpen ? 'âœ•' : 'â˜°';
    });

    /* --- LIBRARY DROPDOWN --- */
const libraryToggle = document.getElementById('libraryToggle');
const libraryMenu = document.getElementById('libraryMenu');

if (libraryToggle && libraryMenu) {
  libraryToggle.addEventListener('click', function(e) {
    e.preventDefault();

    const isExpanded = libraryToggle.getAttribute('aria-expanded') === 'true';
    libraryToggle.setAttribute('aria-expanded', !isExpanded);

    libraryMenu.classList.toggle('show');
  });

  document.addEventListener('click', function(e) {
    if (!libraryToggle.contains(e.target) && !libraryMenu.contains(e.target)) {
      libraryMenu.classList.remove('show');
      libraryToggle.setAttribute('aria-expanded', 'false');
    }
  });
}

    (function seasonalEffects(){ /* ... your existing implementation ... */ })();
  </script>
</body>
</html>


